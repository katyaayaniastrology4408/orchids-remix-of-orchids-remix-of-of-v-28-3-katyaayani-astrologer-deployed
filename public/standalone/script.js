// Translation Data
const translations = {
    hi: {
        brandName: "कात्यायनी ज्योतिष",
        heroTitle: "अपनी वैदिक नियति की खोज करें",
        heroDesc: "भारतीय ज्योतिष के प्राचीन ज्ञान को अनलॉक करें। हमारे विशेषज्ञ रुद्रम जोशी व्यक्तिगत वैदिक ज्योतिष परामर्श और कुंडली विश्लेषण के साथ आपकी कर्मयात्रा में आपका मार्गदर्शन करते हैं।",
        beginJourney: "अपनी यात्रा शुरू करें",
        servicesTitle: "हमारी पवित्र सेवाएं",
        servicesDesc: "वह परामर्श शैली चुनें जो आपके आध्यात्मिक पथ से मेल खाती हो",
        homeConsultation: "घर पर परामर्श",
        homeConsultationDesc: "अपने घर पर व्यक्तिगत वैदिक ज्योतिष सत्र",
        onlineMeeting: "ऑनलाइन बैठक",
        onlineMeetingDesc: "कहीं से भी जुड़ें",
        viewAllServices: "सभी सेवाएं देखें",
        testimonialsTitle: "दिव्य प्रशंसापत्र",
        testimonialsDesc: "हमारे भक्त अपनी यात्रा के बारे में क्या कहते हैं",
        ctaTitle: "अपनी कर्मयात्रा शुरू करें",
        ctaDesc: "वेदों का प्राचीन ज्ञान आपकी प्रतीक्षा कर रहा है। आज ही अपना परामर्श बुक करें और अपने जन्म कुंडली और ग्रहों के प्रभाव के रहस्यों को खोलें।",
        bookReading: "अपनी रीडिंग बुक करें",
        shareFeedback: "प्रतिक्रिया साझा करें",
        quickLinks: "त्वरित लिंक",
        contact: "संपर्क",
        timing: "समय",
        footerDesc: "2010 से प्राचीन वैदिक ज्ञान के माध्यम से आत्माओं का मार्गदर्शन कर रहे हैं। आत्म-खोज की आपकी यात्रा दिव्य ज्ञान के साथ शुरू होती है।",
        copyright: "© 2024 कात्यायनी ज्योतिष। सर्वाधिकार सुरक्षित। ॐ शान्ति शान्ति शान्तिः।",
        timingDetails: ["सोमवार - शुक्रवार: सुबह 6 - रात 9", "शनिवार: सुबह 6 - रात 9", "रविवार: सुबह 6 - रात 9"]
    },
    gu: {
        brandName: "કાત્યાયની જ્યોતિષ",
        heroTitle: "તમારી વૈદિક નિયતિ શોધો",
        heroDesc: "ભારતીય જ્યોતિષના પ્રાચીન જ્ઞાનને અનલૉક કરો. અમારા નિષ્ણાત રુદ્રમ જોશી વ્યક્તિગત વૈદિક જ્યોતિષ પરામર્શ અને કુંડળી વિશ્લેષણ સાથે તમારી કર્મયાત્રામાં તમને માર્ગદર્શન આપે છે.",
        beginJourney: "તમારી યાત્રા શરૂ કરો",
        servicesTitle: "અમારી પવિત્ર સેવાઓ",
        servicesDesc: "તમારા આધ્યાત્મિક માર્ગ સાથે મેળ ખાતી પરામર્શ શૈલી પસંદ કરો",
        homeConsultation: "ઘરે પરામર્શ",
        homeConsultationDesc: "તમારા ઘરે વ્યક્તિગત વૈદિક જ્યોતિષ સત્ર",
        onlineMeeting: "ઓનલાઈન મીટિંગ",
        onlineMeetingDesc: "ગમે ત્યાંથી જોડાઓ",
        viewAllServices: "બધી સેવાઓ જુઓ",
        testimonialsTitle: "દિવ્ય પ્રશંસાપત્રો",
        testimonialsDesc: "અમારા ભક્તો તેમની યાત્રા વિશે શું કહે છે",
        ctaTitle: "તમારી કર્મયાત્રા શરૂ કરો",
        ctaDesc: "વેદોનું પ્રાચીન જ્ઞાન તમારી રાહ જોઈ રહ્યું છે। આજે જ તમારો પરામર્શ બુક કરો અને તમારી જન્મ કુંડળી અને ગ્રહોના પ્રભાવના રહસ્યો શોધો.",
        bookReading: "તમારું વાંચન બુક કરો",
        shareFeedback: "પ્રતિસાદ શેર કરો",
        quickLinks: "ઝડપી લિંક્સ",
        contact: "સંપર્ક",
        timing: "સમય",
        footerDesc: "2010 થી પ્રાચીન વૈદિક જ્ઞાન દ્વારા આત્માઓને માર્ગદર્શન આપી રહ્યા છીએ. આત્મ-શોધની તમારી યાત્રા દિવ્ય જ્ઞાન સાથે શરૂ થાય છે.",
        copyright: "© 2024 કાત્યાયની જ્યોતિષ. સર્વાધિકાર સુરક્ષિત. ॐ શાન્તિ શાન્તિ શાન્તિઃ।",
        timingDetails: ["સોમવાર - શુક્રવાર: સવારે 6 - રાત્રે 9", "શનિવાર: સવારે 6 - રાત્રે 9", "રવિવાર: સવારે 6 - રાત્રે 9"]
    },
    en: {
        brandName: "Katyayani Jyotish",
        heroTitle: "Discover Your Ancient Destiny",
        heroDesc: "Unlock the ancient wisdom of Indian astrology. Our expert Rudram Joshi guides you through your karmic journey with personalized Ancient astrology consultations and kundali analysis.",
        beginJourney: "Begin Your Journey",
        servicesTitle: "Our Sacred Services",
        servicesDesc: "Choose the consultation style that aligns with your spiritual path",
        homeConsultation: "Home Consultation",
        homeConsultationDesc: "Personalized Ancient astrology session at your home",
        onlineMeeting: "Online Meeting",
        onlineMeetingDesc: "Connect from anywhere",
        viewAllServices: "View All Services",
        testimonialsTitle: "Divine Testimonials",
        testimonialsDesc: "What our devotees say about their journey",
        ctaTitle: "Begin Your Karmic Journey",
        ctaDesc: "The ancient wisdom of the Vedas awaits you. Book your consultation today and unlock the secrets of your birth chart and planetary influences.",
        bookReading: "Book Your Reading",
        shareFeedback: "Share Feedback",
        quickLinks: "Quick Links",
        contact: "Contact",
        timing: "Timing",
        footerDesc: "Guiding souls through ancient Ancient wisdom since 2010. Your journey of self-discovery begins with divine knowledge.",
        copyright: "© 2024 Katyayani Jyotish. All rights reserved. Om Shanti Shanti Shanti.",
        timingDetails: ["Monday - Friday: 6 AM - 9 PM", "Saturday: 6 AM - 9 PM", "Sunday: 6 AM - 9 PM"]
    }
};

// Testimonials Data
const testimonialsData = {
    hi: [
        {
            name: "संजयभाई प्रजापति",
            text: "घर पर परामर्श परिवर्तनकारी था। रुद्रम जोशी जी की अंतर्दृष्टि ने मुझे अपने धर्म को स्पष्टता के साथ समझने में मदद की।",
            rating: 5
        },
        {
            name: "राजेश कुमार",
            text: "मैं पहले संशय में था, लेकिन मेरी कुंडली की सटीकता उल्लेखनीय थी। ऑनलाइन सत्र शक्तिशाली था।",
            rating: 5
        }
    ],
    gu: [
        {
            name: "સંજયભાઈ પ્રજાપતિ",
            text: "ઘરે પરામર્શ પરિવર્તનકારી હતો. રુદ્રમ જોશીજીની સમજણે મને મારા ધર્મને સ્પષ્ટતા સાથે સમજવામાં મદદ કરી.",
            rating: 5
        },
        {
            name: "રાજેશ કુમાર",
            text: "હું પહેલા શંકામાં હતો, પણ મારી કુંડળીની ચોકસાઈ નોંધપાત્ર હતી. ઓનલાઈન સત્ર શક્તિશાળી હતું.",
            rating: 5
        }
    ],
    en: [
        {
            name: "Sanjay Prajapati",
            text: "The home consultation was transformative. Rudram Joshi's insights helped me understand my dharma with clarity.",
            rating: 5
        },
        {
            name: "Rajesh Kumar",
            text: "I was skeptical at first, but the accuracy of my kundali was remarkable. The online session was powerful.",
            rating: 5
        }
    ]
};

// State
let currentLanguage = 'en';
let currentTheme = 'dark';

// Initialize
document.addEventListener('DOMContentLoaded', () => {
    initStarfield();
    initTheme();
    initLanguage();
    initEventListeners();
    renderTestimonials();
    renderFooterTiming();
});

// Starfield Animation
function initStarfield() {
    const canvas = document.getElementById('starfield');
    const ctx = canvas.getContext('2d');
    
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;
    
    const stars = [];
    const starCount = 200;
    
    for (let i = 0; i < starCount; i++) {
        stars.push({
            x: Math.random() * canvas.width,
            y: Math.random() * canvas.height,
            size: Math.random() * 2,
            opacity: Math.random(),
            speed: Math.random() * 0.5
        });
    }
    
    function animate() {
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        
        stars.forEach(star => {
            star.opacity += star.speed * 0.01;
            if (star.opacity >= 1 || star.opacity <= 0) {
                star.speed = -star.speed;
            }
            
            ctx.fillStyle = `rgba(255, 255, 255, ${star.opacity})`;
            ctx.beginPath();
            ctx.arc(star.x, star.y, star.size, 0, Math.PI * 2);
            ctx.fill();
        });
        
        requestAnimationFrame(animate);
    }
    
    animate();
    
    window.addEventListener('resize', () => {
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;
    });
}

// Theme Management
function initTheme() {
    const savedTheme = localStorage.getItem('theme') || 'dark';
    currentTheme = savedTheme;
    applyTheme(currentTheme);
}

function applyTheme(theme) {
    document.body.className = `${theme}-theme`;
    
    const sunIcon = document.getElementById('sunIcon');
    const moonIcon = document.getElementById('moonIcon');
    
    if (theme === 'dark') {
        sunIcon.classList.remove('hidden');
        moonIcon.classList.add('hidden');
    } else {
        sunIcon.classList.add('hidden');
        moonIcon.classList.remove('hidden');
    }
}

function toggleTheme() {
    currentTheme = currentTheme === 'dark' ? 'light' : 'dark';
    applyTheme(currentTheme);
    localStorage.setItem('theme', currentTheme);
}

// Language Management
function initLanguage() {
    const savedLanguage = localStorage.getItem('language') || 'en';
    currentLanguage = savedLanguage;
    document.getElementById('languageSelector').value = currentLanguage;
    updateTranslations();
}

function changeLanguage(lang) {
    currentLanguage = lang;
    localStorage.setItem('language', lang);
    updateTranslations();
    renderTestimonials();
    renderFooterTiming();
}

function updateTranslations() {
    const content = translations[currentLanguage];
    
    document.querySelectorAll('[data-i18n]').forEach(element => {
        const key = element.getAttribute('data-i18n');
        if (content[key]) {
            element.textContent = content[key];
        }
    });
}

// Render Testimonials
function renderTestimonials() {
    const grid = document.getElementById('testimonialsGrid');
    const testimonials = testimonialsData[currentLanguage];
    
    grid.innerHTML = testimonials.map(testimonial => `
        <div class="testimonial-card">
            <div class="testimonial-stars">
                ${Array(testimonial.rating).fill('').map(() => `
                    <svg class="star-icon" viewBox="0 0 24 24" fill="currentColor">
                        <polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"></polygon>
                    </svg>
                `).join('')}
            </div>
            <p class="testimonial-text">"${testimonial.text}"</p>
            <p class="testimonial-name">${testimonial.name}</p>
        </div>
    `).join('');
}

// Render Footer Timing
function renderFooterTiming() {
    const content = translations[currentLanguage];
    const timingEl = document.getElementById('footerTiming');
    
    timingEl.innerHTML = content.timingDetails.map(detail => `
        <p>${detail}</p>
    `).join('');
}

// Event Listeners
function initEventListeners() {
    // Theme Toggle
    document.getElementById('themeToggle').addEventListener('click', toggleTheme);
    
    // Language Selector
    document.getElementById('languageSelector').addEventListener('change', (e) => {
        changeLanguage(e.target.value);
    });
    
    // Smooth Scroll
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener('click', function (e) {
            e.preventDefault();
            const target = document.querySelector(this.getAttribute('href'));
            if (target) {
                target.scrollIntoView({ behavior: 'smooth' });
            }
        });
    });
}

// Intersection Observer for animations
const observerOptions = {
    threshold: 0.1,
    rootMargin: '0px 0px -50px 0px'
};

const observer = new IntersectionObserver((entries) => {
    entries.forEach(entry => {
        if (entry.isIntersecting) {
            entry.target.style.opacity = '1';
            entry.target.style.transform = 'translateY(0)';
        }
    });
}, observerOptions);

document.addEventListener('DOMContentLoaded', () => {
    document.querySelectorAll('.service-card, .testimonial-card').forEach(el => {
        el.style.opacity = '0';
        el.style.transform = 'translateY(20px)';
        el.style.transition = 'opacity 0.6s ease, transform 0.6s ease';
        observer.observe(el);
    });
});
